# Configuration for packet-checkins

# This section defines the configuration for each BBS.
bbses:
  W1XSC:
    transport: kpc3plus
    ax25: W1XSC-1
  W2XSC:
    transport: kpc3plus
    ax25: W2XSC-1
  W3XSC:
    transport: kpc3plus
    ax25: W3XSC-1
  W4XSC:
    transport: kpc3plus
    ax25: W4XSC-1

# This section defines the default parameters that apply to all practice
# sessions, unless overridden in the definitions of the specific sessions below.
sessionDefaults:
  # The BBS(es) to which check-in messages should be sent.  This is W2XSC on
  # most days, but W4XSC when the session end date falls in the second week of
  # the month.  Note that this setting allows multiple destination BBSes; all
  # matching rules apply, and messages sent to any of them would be considered
  # valid.
  #
  # Delivery receipts and problem responses for a particular check-in message
  # are sent from the BBS that received that message.  Session reports are
  # sent from the first BBS matched by this setting.
  toBBSes:
    - { when: 'DAY=8-14', then: W4XSC }
    - { when: 'DAY=1-7,15-31', then: W2XSC }
  # The BBS(es) that are considered "down" during a session.  These are W1XSC
  # when the session end date is in the first week of the month, W2XSC in the
  # second week, etc.  Note that this setting allows the possibility of having
  # multiple BBSes "down"; all matching rules apply.
  downBBSes:
    - { when: 'DAY=1-7', then: W1XSC }
    - { when: 'DAY=8-14', then: W2XSC }
    - { when: 'DAY=15-21', then: W3XSC }
    - { when: 'DAY=22-28', then: W4XSC }
  # Message type(s) that are accepted for check-in messages for the session.
  # This is ICS-213 in February, June, and October; EOC-213RR in March, July,
  # and November; and OA Municipal Status in April, August, and December.
  # Plain text messages are accepted in any month, and are the only messages
  # accepted in January, April, and September.
  messageTypes:
    - { when: 'MONTH=2,6,10', then: ICS213 }
    - { when: 'MONTH=3,7,11', then: EOC213RR }
    - { when: 'MONTH=4,8,12', then: MuniStat }
    - { when: 'MONTH=4,8,12', then: JurisStat }
    - { when: 'MONTH=1-12', then: 'plain' }
  # Session reports are sent to the packet email list (as well as to the
  # individuals who checked in).
  reportTo:
    html:
      - packet@scc-ares-races.groups.io

# This section defines which practice sessions exist, and their parameters.  Any
# parameters not specified here are taken from sessionDefaults, above.
sessions:
  # Settings for the Monday night SPECS net sessions.
  PKTMON:
    name: SPECS Net
    prefix: MON
    # Each PKTMON session starts at midnight after the end of the previous
    # PKTMON session, and ends the following Monday night at 20:00.
    start: HOUR=0 MINUTE=0
    end: WEEKDAY=Monday HOUR=20 MINUTE=0
  # Settings for the Tuesday night SVECS net sessions.
  PKTTUE:
    name: SVECS Net
    prefix: TUE
    # Each PKTTUE session starts at midnight after the end of the previous
    # PKTTUE session, and ends the following Tuesday night at 20:00.
    start: HOUR=0 MINUTE=0
    end: WEEKDAY=Tuesday HOUR=20 MINUTE=0
  # Settings for the test sessions.
  PKTEST:
    name: Test Check-Ins
    prefix: TST
    # Each PKTEST session starts at 20:00 daily and runs until 20:00 the
    # following day.
    start: HOUR=20 MINUTE=0
    end: HOUR=20 MINUTE=0
    # We retrieve PKTEST messages every hour of every day.
    # PKTEST session reports are sent only to those who checked in.
    reportTo: {}
    # PKTEST sessions are not included in the weekly summaries.
    excludeFromWeek: true

# This section defines the minimum acceptable form versions.
minimumVersions:
  PackItForms: 3.2
  AHFacStat: 2.2
  ICS213: 2.1
  EOC213RR: 2.3
  JurisStat: 2.2
  MuniStat: 2.1
  RACES-MAR: 2.1
  SheltStat: 2.1

# This section defines how each detected problem is treated.  Each problem code
# maps to a list of actions to be taken when the problem is detected, which is a
# space-separated list of zero or more of the following keywords:
#   respond   - the problem should be described in a response to the sender
#   report    - the problem gets listed in the report
#   error     - the message gets counted as an error
#   dontcount - the message does not get counted as a valid checkin
#   dropmsg   - drop the entire message from the report
problems:
  BounceMessage: report dontcount
  CallSignConflict: respond report error
  DeliveryReceipt: dropmsg
  FormCorrupt: respond report error
  FormDestination: respond report error
  FormHandlingOrder: respond report error
  FormInvalid: respond report error
  FormNoCallSign: respond report dontcount
  FormPracticeSubject: respond report
  FormSubject: respond report error
  FormToICSPosition: respond report error
  FormToLocation: respond report error
  FormVersion: respond report error
  FromBBSDown: respond report error
  HandlingOrderCode: respond report error
  MessageCorrupt: report dontcount
  MessageFromWinlink: respond report error
  MessageNotASCII: respond report error
  MessageNotPlainText: respond report error
  MessageTooEarly: respond report dontcount
  MessageTooLate: respond report dontcount
  MessageTypeWrong: respond report error
  MsgNumFormat: respond report error
  MsgNumPrefix: respond report
  MultipleMessagesFromAddress: report
  NoCallSign: respond report dontcount
  PIFOVersion: respond report error
  PracticeAsFormName: respond report error
  PracticeSubjectFormat: respond report
  ReadReceipt: respond report dontcount
  SessionDate: respond report
  SubjectFormat: respond report error
  SubjectPlainForm: respond report error
  SubjectHasSeverity: respond report error
  ToBBS: respond report dontcount
  ToBBSDown: respond report dontcount
  UnknownJurisdiction: respond report

# This section lists the known jurisdiction names and their abbreviations.
jurisdictions:
  Alameda County: XAL
  American Red Cross: ARC
  CalFIRE Santa Clara Unit: SCU
  CalOES Coastal Region: COS
  Campbell: CBL
  Contra Costa County: XCC
  Cupertino: CUP
  Gilroy: GIL
  Hospitals: HOS
  Loma Prieta: LMP
  Los Altos: LOS
  Los Altos Hills: LAH
  Los Gatos: LGT
  Marin County: XMR
  Milpitas: MLP
  Monte Sereno: MSO
  Monterey County: XMY
  Morgan Hill: MRG
  Mountain View: MTV
  NASA/AMES: NAM
  Palo Alto: PAF
  San Benito County: XBE
  San Francisco County: XSF
  San Jose: SJC
  San Jose Water Co: SJW
  San Mateo County: XSM
  Santa Clara: SNC
  Santa Clara County: XSC
  Santa Clara Valley Water District: VWD
  Santa Cruz County: XCZ
  Saratoga: SAR
  Stanford University: STU
  Sunnyvale: SNY

# This section defines the expected handling order and destination of each of
# the different form types.  For HandlingOrder, possible values are "computed"
# (for ICS213 and EOC213RR only), "IMMEDIATE", "PRIORITY", or "ROUTINE".  For
# ToICSPosition and ToLocation, any listed value is considered acceptable.
# Fields that are omitted from this section are not checked.
formRouting:
  ICS213:
    HandlingOrder: computed # based on severity in form
  AHFacStat:
    HandlingOrder: ROUTINE
    ToICSPosition:
      - EMS Unit
      - Public Health Unit
      - Medical Health Branch
      - Operations Section
    ToLocation:
      - MHJOC
      - County EOC
  EOC213RR:
    HandlingOrder: computed # based on priority in form
    ToICSPosition:
      - Planning Section
    ToLocation:
      - County EOC
  JurisStat:
    HandlingOrder: IMMEDIATE
    ToICSPosition:
      - Situation Analysis Unit
      - Planning Section
    ToLocation:
      - County EOC
  MuniStat:
    HandlingOrder: IMMEDIATE
    ToICSPosition:
      - Situation Analysis Unit
      - Planning Section
    ToLocation:
      - County EOC
  RACES-MAR:
    HandlingOrder: ROUTINE
    ToICSPosition:
      - RACES Chief Radio Officer
      - RACES Unit
      - Operations Section
    ToLocation:
      - County EOC
  SheltStat:
    HandlingOrder: PRIORITY
    ToICSPosition:
      - Mass Care and Shelter Unit
      - Care and Shelter Branch
      - Operations Section

listenAddr: none

# These are the details for sending email messages via SMTP (e.g. for reports).
smtp:
  from: x@x.com
  server: x:25
  username: x
  password: x

# Configuration for packet-checkins

# This section defines the configuration for each BBS.
bbses:
  W1XSC:
    transport: kpc3plus
    ax25: W1XSC-1
  W2XSC:
    transport: kpc3plus
    ax25: W2XSC-1
  W3XSC:
    transport: kpc3plus
    ax25: W3XSC-1
  W4XSC:
    transport: kpc3plus
    ax25: W4XSC-1

# This section defines the default parameters that apply to all practice
# sessions, unless overridden in the definitions of the specific sessions below.
sessionDefaults:
  # The BBS(es) to which check-in messages should be sent.  This is W2XSC on
  # most days, but W4XSC when the session end date falls in the second week of
  # the month.  Note that this setting allows multiple destination BBSes; all
  # matching rules apply, and messages sent to any of them would be considered
  # valid.
  #
  # Delivery receipts and problem responses for a particular check-in message
  # are sent from the BBS that received that message.  Session reports are
  # sent from the first BBS matched by this setting.
  toBBSes:
    - { when: 'DAY=8-14', then: W4XSC }
    - { when: 'DAY=1-7,15-31', then: W2XSC }
  # The BBS(es) that are considered "down" during a session.  (Messages sent
  # either from them or to them are considered errors.)  These are W1XSC when
  # the session end date is in the first week of the month, W2XSC in the second
  # week, etc.  Note that this setting allows the possibility of having multiple
  # BBSes "down".  Note also that marking a BBS "down" does not prevent
  # retrieval of messages from it.  (To do that, remove it from the "retrieve"
  # setting for the session.)
  downBBSes:
    - { when: 'DAY=1-7', then: W1XSC }
    - { when: 'DAY=8-14', then: W2XSC }
    - { when: 'DAY=15-21', then: W3XSC }
    - { when: 'DAY=22-28', then: W4XSC }
  # Message type(s) that are accepted for practice messages for the session.
  # Note that, for messages coming from a BBS outside our system, plain text is
  # always allowed.
  messageTypes:
    - { when: 'MONTH=1', then: 'plain' }
    - { when: 'MONTH=2,6,10', then: ICS213 }
    - { when: 'MONTH=3,7,11', then: EOC213RR }
    - { when: 'MONTH=4,8', then: MuniStat }
    - { when: 'MONTH=4,8', then: JurisStat }
    - { when: 'MONTH=5', then: SheltStat }
    - { when: 'MONTH=9', then: AHFacStat }
    - { when: 'MONTH=12', then: RACES-MAR }
  # Session reports are sent to everyone who sent a practice messages, and to
  # the packet email list.
  reportTo:
    text:
      - MESSAGE-SENDERS
    html:
      - packet@scc-ares-races.groups.io

# This section defines which practice sessions exist, and their parameters.  Any
# parameters not specified here are taken from sessionDefaults, above.
sessions:
  # Settings for the Monday night SPECS net sessions.
  PKTMON:
    name: SPECS Net
    prefix: MON
    # Each PKTMON session starts at midnight on Tuesday (after the end of the
    # previous PKTMON session), and ends the following Monday night at 19:00.
    start: WEEKDAY=Tuesday HOUR=0 MINUTE=0
    end: WEEKDAY=Monday HOUR=19 MINUTE=0
  # Settings for the Tuesday night SVECS net sessions.
  PKTTUE:
    name: SVECS Net
    prefix: TUE
    # Each PKTTUE session starts at midnight on Wednesday (after the end of the
    # previous PKTTUE session), and ends the following Tuesday night at 19:00.
    start: WEEKDAY=Wednesday HOUR=0 MINUTE=0
    end: WEEKDAY=Tuesday HOUR=19 MINUTE=0

# This is the minimum acceptable version of PackItForms.
minPIFOVersion: 3.2 # 161G: 3.9

# This section defines the characteristics of the message types.  All message
# types must be defined except "plain", which is optional.  Each message type
# has the following keys:
#   - minimumVersion: the minimum acceptable version of the form (required)
#   - noPracticeInfo: set to true if messages of this type aren't expected to
#     have "Practice ..." information in their subject line.
#   - handlingOrder: expected handling order for messages of this type
#     (optional).  Possible values are "computed" (for ICS213 and EOC213RR
#     only), "IMMEDIATE", "PRIORITY", or "ROUTINE".
#   - toICSPosition and toLocation: expected destination for messages of this
#     type (optional list of acceptable values).
messageTypes:
  AHFacStat:
    minimumVersion: 2.2 # 161G: 2.3
    handlingOrder: ROUTINE
    toICSPosition:
      - EMS Unit
      - Public Health Unit
      - Medical Health Branch
      - Operations Section
    toLocation:
      - MHJOC
      - County EOC
  EOC213RR:
    minimumVersion: 2.3 # 161G: 2.3
    handlingOrder: computed # based on priority in form
    toICSPosition:
      - Planning Section
    toLocation:
      - County EOC
  ICS213:
    minimumVersion: 2.1 # 161G: 2.2
    handlingOrder: computed # based on severity in form
  JurisStat:
    minimumVersion: 2.2 # 161G: 2.2
    handlingOrder: IMMEDIATE
    toICSPosition:
      - Situation Analysis Unit
      - Planning Section
    toLocation:
      - County EOC
  MuniStat:
    minimumVersion: 2.1 # 161G: gone
    handlingOrder: IMMEDIATE
    toICSPosition:
      - Situation Analysis Unit
      - Planning Section
    toLocation:
      - County EOC
  RACES-MAR:
    minimumVersion: 2.1 # 161G: 2.3
    handlingOrder: ROUTINE
    toICSPosition:
      - RACES Chief Radio Officer
      - RACES Unit
      - Operations Section
    toLocation:
      - County EOC
  SheltStat:
    minimumVersion: 2.1 # 161G: 2.2
    handlingOrder: PRIORITY
    toICSPosition:
      - Mass Care and Shelter Unit
      - Care and Shelter Branch
      - Operations Section

# This section defines how each detected problem is treated.  Each problem code
# maps to a list of actions to be taken when the problem is detected, which is a
# space-separated list of zero or more of the following keywords:
#   respond   - the problem should be described in a response to the sender
#   report    - the problem gets listed in the report
#   error     - the message gets counted as an error
#   dontcount - the message does not get counted as a valid checkin
#   dropmsg   - drop the entire message from the report
problems:
  BounceMessage: report dontcount
  CallSignConflict: respond report error
  DeliveryReceipt: dropmsg
  FormCorrupt: respond report error
  FormDestination: respond report error
  FormHandlingOrder: respond report error
  FormInvalid: respond report error
  FormNoCallSign: respond report dontcount
  FormPracticeSubject: respond report error
  FormSubject: respond report error
  FormToICSPosition: respond report error
  FormToLocation: respond report error
  FormVersion: respond report error
  FromBBSDown: respond report error
  HandlingOrderCode: respond report error
  MessageCorrupt: report dontcount
  MessageFromWinlink: respond report error
  MessageNotASCII: respond report error
  MessageNotPlainText: respond report error
  MessageTooEarly: respond report dontcount
  MessageTooLate: respond report dontcount
  MessageTypeWrong: respond report error
  MsgNumFormat: respond report error
  MsgNumPrefix: respond report error
  MultipleMessagesFromAddress: report
  NoCallSign: respond report dontcount
  PIFOVersion: respond report error
  PracticeAsFormName: respond report error
  PracticeSubjectFormat: respond report error
  ReadReceipt: respond report dontcount
  SessionDate: respond report error
  SubjectFormat: respond report error
  SubjectPlainForm: respond report error
  SubjectHasSeverity: respond report error
  ToBBS: respond report dontcount
  ToBBSDown: respond report dontcount
  UnknownJurisdiction: respond report error

# This section lists the known jurisdiction names and their abbreviations.
jurisdictions:
  Alameda County: XAL
  American Red Cross: ARC
  CalFIRE Santa Clara Unit: SCU
  CalOES Coastal Region: COS
  Campbell: CBL
  Contra Costa County: XCC
  Cupertino: CUP
  Gilroy: GIL
  Hospitals: HOS
  Loma Prieta: LMP
  Los Altos: LOS
  Los Altos Hills: LAH
  Los Gatos: LGT
  Marin County: XMR
  Milpitas: MLP
  Monte Sereno: MSO
  Monterey County: XMY
  Morgan Hill: MRG
  Mountain View: MTV
  NASA/AMES: NAM
  Palo Alto: PAF
  San Benito County: XBE
  San Francisco County: XSF
  San Jose: SJC
  San Jose Water Co: SJW
  San Mateo County: XSM
  Santa Clara: SNC
  Santa Clara County: XSC
  Santa Clara Valley Water District: VWD
  Santa Cruz County: XCZ
  Saratoga: SAR
  Stanford University: STU
  Sunnyvale: SNY
  Unincorporated: XSC

serverURL: https://none
listenAddr: none

# These are the details for sending email messages via SMTP (e.g. for reports).
smtp:
  from: x@x.com
  server: x:25
  username: x
  password: x
